var mp=angular.module("mp",["ngRoute","ui.bootstrap"]);mp.config(["$routeProvider",function(e){"use strict";e.when("/",{templateUrl:"app/components/map/map.view.html",controller:"MapController"}).when("/about",{templateUrl:"app/components/static/about.view.html",controller:"StaticController"}).when("/help",{templateUrl:"app/components/static/help.view.html",controller:"StaticController"}).otherwise({redirectTo:"/"})}]),angular.module("mp").run(["$templateCache",function(e){e.put("app/components/static/about.view.html",'<div class="container">\n  <div class="row">\n    <h2>About</h2>\n    <p>\n      MappingPiracy.github.io is a web application and toolkit for mapping and\n      visualizing a dataset of over 7000 maritime piracy incidents and attacks dating back to 1993.\n    </p>\n    <p>\n      MappingPiracy.github.io is a part of the Mapping Maritime Piracy research initiative with\n      faculty and student contributors at the University of Tennessee, Knoxville and the University of Amsterdam.\n    </p>\n    <p>\n      Please email Alex Klibisz, aklibisz@vols.utk.edu or Dr. Brandon Prins, bprins@utk.edu to\n      report any bugs or suggest new tools or functionality.\n    </p>\n    <p>\n      All source code for this application is <a href="https://github.com/mappingpiracy/mappingpiracy.github.io">available on Github</a>\n    </p>\n  </div>\n\n</div>\n')}]),angular.module("mp").run(["$templateCache",function(e){e.put("app/components/static/help.view.html",'<div class="container">\n  <div class="row">\n    <h2>Help</h2>\n    <p>\n      <a href="https://github.com/mappingpiracy/mpmap-sails/blob/master/docs/usage.md">Please see the usage documentation on Github.</a>\n    </p>\n  </div>\n</div>\n')}]),angular.module("mp").run(["$templateCache",function(e){e.put("app/components/map/map.view.html",'<incident-map data="map.data"></incident-map>\n\n<div class="ui-controls-pane">\n  <form class="form-inline" role="form">\n    <div class="form-group">\n      <label>Data Source</label>\n      <select ng-model="dataSource" ng-init="dataSource = dataSources[0]" ng-options="ds.name for ds in dataSources" class="form-control">\n      </select>\n      <button type="button" class="btn btn-default btn-sm" ng-click="initialize()">Update Data Source</button>\n    </div>|\n    <button type="button" class="btn btn-default btn-sm" ng-click="showFilters = !showFilters">Show/Hide Data Filters</button>\n    <button type="button" class="btn btn-default btn-sm" ng-click="showAnalysis = !showAnalysis">Show/Hide Data Analysis</button>\n    <button type="button" class="btn btn-default btn-sm" ng-click="initialize()">Export Data</button>\n    <span ng-show="map.geojson.data.features !== null">\n      <label>| Displaying {{map.data.length}} incidents</label>\n    </span>\n  </form>\n</div>\n\n<div class="data-filters-pane" ng-show="showFilters">\n  <header class="pane-header">\n    <h3>Data Filters</h3>\n    <small>Modify the filters below, then click \'Apply Filters\' to see the resulting incidents.</small>\n  </header>\n  <div class="btn-group" role="group" aria-label="...">\n    <button type="button" class="btn btn-primary" ng-click="populateIncidents(); populateAnalysis();">Apply Filters</button>\n    <button type="button" class="btn btn-default" ng-click="initialize()">Reset Filters</button>\n  </div>\n  <div class="data-filters-pane-content">\n    <!-- Date Range Filter Begin -->\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h4>Date Range</h4>\n      </div>\n      <div class="panel-body">\n        <label>Year</label>\n        <select ng-model="dataFilters.selectedYear" ng-init="dataFilters.selectedYear = dataFilters.years[0]" ng-options="year for year in dataFilters.years" class="form-control">\n        </select>\n        <hr>\n        <label>Begin Date</label>\n        <date-picker ng-model="dataFilters.beginDate" min-date="1993-01-01"></date-picker>\n        <hr>\n        <label>End Date</label>\n        <date-picker ng-model="dataFilters.endDate" min-date="1993-01-01"></date-picker>\n      </div>\n    </div>\n    <!-- Date Range Filter End -->\n    <!-- Location Information Filter Begin -->\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h4>Location Information</h4>\n      </div>\n      <div class="panel-body">\n        <label>Closest Coastal State</label>\n        <typeahead-multiselect all-items="dataFilters.countries" selected-items="dataFilters.selectedClosestCoastalStates"></typeahead-multiselect>\n        <hr>\n        <label>Territorial Water Status</label>\n        <typeahead-multiselect all-items="dataFilters.territorialWaterStatuses" selected-items="dataFilters.selectedTerritorialWaterStatuses"></typeahead-multiselect>\n        <hr>\n        <label>Geolocation Source</label>\n        <br>\n        <small>Use CTRL+click or drag to select multiples</small>\n        <select multiple class="form-control" ng-options="geolocationSource as geolocationSource for geolocationSource in dataFilters.geolocationSources" ng-model="dataFilters.selectedGeolocationSources">\n        </select>\n      </div>\n    </div>\n    <!-- Location Information Filter End -->\n    <!-- Vessel Information Filter Begin -->\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h4>Vessel Information</h4>\n      </div>\n      <div class="panel-body">\n        <label>Vessel Country</label>\n        <typeahead-multiselect all-items="dataFilters.countries" selected-items="dataFilters.selectedVesselCountries"></typeahead-multiselect>\n        <hr>\n        <label>Vessel Status</label>\n        <br>\n        <small>Use CTRL+click or drag to select multiples</small>\n        <select multiple class="form-control" ng-options="vesselStatus as vesselStatus for vesselStatus in dataFilters.vesselStatuses" ng-model="dataFilters.selectedVesselStatuses">\n        </select>\n      </div>\n    </div>\n    <!-- Vessel Information Filter End -->\n    <!-- Incident Information Filter Begin -->\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        Incident Information\n      </div>\n      <div class="panel-body">\n        <label>Incident Type</label>\n        <br>\n        <small>Use CTRL+click or drag to select multiples</small>\n        <select multiple class="form-control" ng-options="incidentType as incidentType for incidentType in dataFilters.incidentTypes" ng-model="dataFilters.selectedIncidentTypes">\n        </select>\n        <hr>\n        <label>Incident Action</label>\n        <br>\n        <small>Use CTRL+click or drag to select multiples</small>\n        <select multiple class="form-control" ng-options="incidentAction as incidentAction for incidentAction in dataFilters.incidentActions" ng-model="dataFilters.selectedIncidentActions">\n        </select>\n      </div>\n    </div>\n    <!-- Incident Information Filter End -->\n  </div>\n</div>\n\n<div class="data-analysis-pane" ng-if="showAnalysis">\n  <header class="pane-header">\n    <h3>Data Analysis</h3>\n    <small>Incidents per year, grouped by the \'Closest Coastal State\' filter.</small>\n  </header>\n  <div class="data-analysis-pane-content">\n    <incidents-per-year data="analysis.data" begin-date="dataFilters.beginDate" end-date="dataFilters.endDate" countries="dataFilters.selectedClosestCoastalStates"></incidents-per-year>\n  </div>\n</div>\n')}]),angular.module("mp").run(["$templateCache",function(e){e.put("app/components/common/directives/date-picker/date-picker.template.html",'<div class="date-picker">\n  <div class="input-group">\n    <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="modelVal" is-open="status.opened" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions" close-text="Close" />\n    <span class="input-group-btn">\n      <button type="button" class="btn btn-default" ng-click="open($event)">Select</button>\n    </span>\n  </div>\n</div>\n')}]),angular.module("mp").run(["$templateCache",function(e){e.put("app/components/common/directives/incidents-per-year/incidents-per-year.template.html",'<div class="incidents-per-year-graph">\n  <svg></svg>\n</div>\n')}]),angular.module("mp").run(["$templateCache",function(e){e.put("app/components/common/directives/typeahead-multiselect/typeahead-multiselect.template.html",'<div class="typeahead-multiselect">\n  <input type="text" ng-model="enteredText" placeholder="Type and press enter to select an item" class="form-control" typeahead="item for item in allItems | filter:$viewValue | limitTo:8" typeahead-on-select="selectItem($item)">\n  <div class="typeahead-multiselect-selected">\n    <small ng-show="selectedItems.length > 0">Selected:</small>\n    <span ng-repeat="item in selectedItems" class="badge" >\n      {{item}}\n      <button type="button" class="btn btn-xs btn-default" ng-click="deselectItem(item)">&nbsp;X&nbsp;</button>\n    </span>\n  </div>\n\n</div>\n')}]),angular.module("mp").run(["$templateCache",function(e){e.put("app/components/common/directives/incident-map/incident-map.template.html",'<div>\n  <div id="incident-map"></div>\n</div>\n')}]),function(){"use strict";function e(e,t,n,a){function i(){n.createDataFilters(),n.populateDataFilters(),n.populateIncidents(),n.populateAnalysis()}function s(){n.dataFilters={years:[],beginDate:new Date((new Date).getFullYear()-1,0,1),endDate:new Date((new Date).getFullYear(),11,31),selectedYear:null,countries:[],selectedClosestCoastalStates:[],selectedVesselCountries:[],territorialWaterStatuses:[],selectedTerritorialWaterStatuses:[],geolocationSources:[],selectedGeolocationSources:[],incidentTypes:[],selectedIncidentTypes:[],incidentActions:[],selectedIncidentActions:[]}}function r(){return{beginDate:n.dataFilters.beginDate,endDate:n.dataFilters.endDate,closestCoastalState:n.dataFilters.selectedClosestCoastalStates,territorialWaterStatus:n.dataFilters.selectedTerritorialWaterStatuses,geolocationSource:n.dataFilters.selectedGeolocationSources,vesselCountry:n.dataFilters.selectedVesselCountries,vesselStatus:n.dataFilters.selectedVesselStatuses,incidentType:n.dataFilters.selectedIncidentTypes,incidentAction:n.dataFilters.selectedIncidentActions}}function o(){e.getYears(n.dataSource.url).then(function(e){n.dataFilters.years=e,n.dataFilters.selectedYear=e[0],n.$watch(function(){return n.dataFilters.selectedYear},function(e){n.dataFilters.beginDate=new Date(e,0,1,0,0,0),n.dataFilters.endDate=new Date(e,11,31,0,0,0)})}),e.getCountries(n.dataSource.url).then(function(e){n.dataFilters.countries=e,n.dataFilters.selectedClosestCoastalStates=[]}),e.getTerritorialWaterStatuses(n.dataSource.url).then(function(e){n.dataFilters.territorialWaterStatuses=e,n.dataFilters.selectedTerritorialWaterStatuses=[]}),e.getIncidentTypes(n.dataSource.url).then(function(e){n.dataFilters.incidentTypes=e,n.dataFilters.selectedIncidentTypes=[]}),e.getIncidentActions(n.dataSource.url).then(function(e){n.dataFilters.incidentActions=e,n.dataFilters.selectedIncidentActions=[]}),e.getVesselStatuses(n.dataSource.url).then(function(e){n.dataFilters.vesselStatuses=e,n.dataFilters.selectedVesselStatuses=[]}),e.getGeolocationSources().then(function(e){n.dataFilters.geolocationSources=e,n.dataFilters.selectedGeolocationSources=[]})}function l(){var a=r(),i=t.open({template:"Loading Data"});e.getIncidents(n.dataSource.url,a,["*"]).then(function(e){n.map.data=e,i.close()})["catch"](function(e){i.close(),t.open({template:"An error occurred"})})}function c(){var t=r();e.getIncidentsPerYearPerCountry(n.dataSource.url,t).then(function(e){n.analysis.data=e})}function u(){var t=r();e.exportIncidentsCSV(n.dataSource.url,t)}n.dataSource=null,n.dataSources=[],n.showFilters=!0,n.showAnalysis=!1,n.map={data:[]},n.analysis={data:[]},n.initialize=i,n.createDataFilters=s,n.populateDataFilters=o,n.populateIncidents=l,n.populateAnalysis=c,n.exportData=u,e.getDataSources().then(function(e){n.dataSource=e[0],n.dataSources=e,n.initialize()})}mp.controller("MapController",["IncidentService","$modal","$scope","SheetRockService",e])}(),function(){"use strict";function e(e){e.foo="bar"}mp.controller("StaticController",["$scope",e])}(),function(){"use strict";function e(){function e(e,t){var n="mapping-piracy-export-"+(new Date).toString("yyyy-MM-dd-HH:mm:ss")+".csv",a=e.join(",")+"\n"+t.map(function(t){return e.map(function(e){return'"'+t[e]+'"'}).join()}).join("\n"),i=new Blob([a],{type:"text/csv; charset=utf-8;"});saveAs(i,n)}var t={exportCSV:e};return t}mp.service("ExportService",e),e.$inject=[]}(),function(){"use strict";function e(e,t,n,a,i){function s(e,t,n,a){n=angular.isUndefined(n)?["*"]:n.join(", ");var s=l(t),r="select "+n+s;return r=i.renderQuery(v.columnMap,r),i.executeQuery(e,r,a).then(function(e){return e=c(e)})["catch"](function(e){var t=[];return t})}function r(t,n){return s(t,n,["*"]).then(function(t){var n=Object.keys(v.columnMap);e.exportCSV(n,t)})}function o(e,t){var n,a=(t.beginDate,t.endDate,t.closestCoastalState,l(t));return n="select count(id), year(date_occurred), closest_coastal_state "+a+' group by closest_coastal_state, year(date_occurred)  label count(id) "count", year(date_occurred) "year", closest_coastal_state "country"',n=i.renderQuery(v.columnMap,n),i.executeQuery(e,n).then(function(e){return e})["catch"](function(e){var t=[];return t})}function l(e){var t=[];if(angular.isDefined(e.id)&&t.push("id = "+e.id),angular.isDefined(e.beginDate)&&angular.isDefined(e.endDate)&&(t.push('date "'+moment(e.beginDate).format("YYYY-MM-DD")+'" < date_occurred'),t.push('date "'+moment(e.endDate).format("YYYY-MM-DD")+'" > date_occurred')),angular.isDefined(e.closestCoastalState)&&e.closestCoastalState.length>0){var n=e.closestCoastalState.join("|");t.push('closest_coastal_state matches "'+n+'"')}if(angular.isDefined(e.territorialWaterStatus)&&e.territorialWaterStatus.length>0){var n=e.territorialWaterStatus.join("|");t.push('territorial_water_status matches "'+n+'"')}if(angular.isDefined(e.vesselCountry)&&e.vesselCountry.length>0){var n=e.vesselCountry.join("|");t.push('vessel_country matches "'+n+'"')}if(angular.isDefined(e.vesselStatus)&&e.vesselStatus.length>0){var n=e.vesselStatus.join("|");t.push('vessel_status matches "'+n+'"')}if(angular.isDefined(e.incidentType)&&e.incidentType.length>0){var n=e.incidentType.join("|");t.push('incident_type matches "'+n+'"')}if(angular.isDefined(e.incidentAction)&&e.incidentAction.length>0){var n=e.incidentAction.join("|");t.push('incident_action matches "'+n+'"')}return angular.isDefined(e.geolocationSource)&&e.geolocationSource.length>0&&(e.geolocationSource.indexOf("IMB")>-1&&t.push("geolocation_source_imb = 1"),e.geolocationSource.indexOf("IMO")>-1&&t.push("geolocation_source_imo = 1"),e.geolocationSource.indexOf("ASAM")>-1&&t.push("geolocation_source_asam = 1")),t.length>0?" where "+t.join(" and "):""}function c(e){var t=!1;return e.forEach(function(n,a){angular.isDefined(n.date_occurred)?n.date_occurred=i.convertDate(n.date_occurred):t=!0,angular.isDefined(n.latitude)&&angular.isDefined(n.longitude)?(n.latitude=Number(n.latitude.trim()),n.longitude=Number(n.longitude.trim())):t=!0,(isNaN(n.latitude)||Math.abs(n.latitude)>90||Math.abs(n.longitude)>180)&&(t=!0),t&&e.splice(a,1)}),e}function u(e){var t="select count(id), year(date_occurred) where date_occurred is not null group by year(date_occurred) order by year(date_occurred) desc";return t=i.renderQuery(v.columnMap,t),i.executeQuery(e,t).then(function(e){return e.map(function(e){return e["year(date_occurred)"]})})}function d(e){var t=[],n={},a="select closest_coastal_state, vessel_country where closest_coastal_state is not null and vessel_country is not null";return a=i.renderQuery(v.columnMap,a),i.executeQuery(e,a).then(function(e){return e.forEach(function(e){n[e.closest_coastal_state]=1,n[e.vessel_country]=1}),t=Object.keys(n).sort()})}function p(e){var t="select count(id), territorial_water_status where territorial_water_status is not null group by territorial_water_status order by territorial_water_status asc";return t=i.renderQuery(v.columnMap,t),i.executeQuery(e,t).then(function(e){return e.map(function(e){return e.territorial_water_status})})}function m(e){var t="select count(id), vessel_status where vessel_status is not null group by vessel_status order by vessel_status asc";return t=i.renderQuery(v.columnMap,t),i.executeQuery(e,t).then(function(e){return e.map(function(e){return e.vessel_status})})}function f(e){var t="select count(id), incident_type where incident_type is not null group by incident_type order by incident_type asc";return t=i.renderQuery(v.columnMap,t),i.executeQuery(e,t).then(function(e){return e.map(function(e){return e.incident_type})})}function h(e){var t="select count(id), incident_action where incident_action is not null group by incident_action order by incident_action asc";return t=i.renderQuery(v.columnMap,t),i.executeQuery(e,t).then(function(e){return e.map(function(e){return e.incident_action})})}function g(e){var t=a.defer();return t.resolve(["IMB","IMO","ASAM"]),t.promise}function y(){return t.get("config/data-sources.json").then(function(e){return v.dataSources=e.data,v.dataSources})}var v=this;v.columnMap={id:"A",date_occurred:"B",time_of_day:"C",time_of_day_recode:"D",incident_type:"E",incident_action:"F",territorial_water_status:"G",closest_coastal_state:"H",closest_coastal_state_cow_code:"I",latitude:"J",longitude:"K",location_precision:"L",geolocation_source_imb:"M",geolocation_source_imo:"N",geolocation_source_asam:"O",location_description:"P",vessel_name:"Q",vessel_country:"R",vessel_country_cow_code:"S",vessel_status:"T",violence_dummy:"U",steaming_recode:"V",incident_type_recode:"W",incident_action_recode:"X"};var b={getIncidents:s,exportIncidentsCSV:r,getIncidentsPerYearPerCountry:o,getYears:u,getCountries:d,getTerritorialWaterStatuses:p,getVesselStatuses:m,getIncidentTypes:f,getIncidentActions:h,getDataSources:y,getGeolocationSources:g};return b}mp.service("IncidentService",e),e.$inject=["ExportService","$http","$log","$q","SheetRockService"]}(),function(){"use strict";function e(e,t,n){function a(e,t,a){function i(e,n,a){if(e)console.error(t),console.error(e),console.error(a),s.reject(e);else{var i=a.rows.map(function(e){return e.cells});r(i[0])&&i.splice(0,1),s.resolve(i)}}var s=n.defer(),o={url:e,query:t,callback:i,reset:!0};return angular.isDefined(a)&&(o.fetchSize=a),sheetrock(o),s.promise}function i(e){return e=e.replace(/Date\(/g,""),e=e.replace(/\)/g,""),e=e.split(","),e=new Date(e[0],e[1],e[2],0,0,0),moment(e).format("YYYY-MM-DD")}function s(e,t){return Object.keys(e).forEach(function(n){var a=e[n],i=new RegExp("[(]"+n,"g");t=t.replace(i,"("+a),i=new RegExp("[ ]"+n,"g"),t=t.replace(i," "+a)}),t}function r(e){for(var t=Object.keys(e),n=0;n<t.length;n++)if(t[n]!==e[t[n]])return!1;return!0}var o=this;o.dataSources=[];var l={executeQuery:a,convertDate:i,renderQuery:s};return l}mp.service("SheetRockService",e),e.$inject=["$http","$log","$q"]}(),function(){"use strict";function e(){function e(e){function t(){var e=L.map("incident-map").setView([-10,50],3);return L.tileLayer("http://{s}.tiles.mapbox.com/v3/utkpiracyscience.n97d5l62/{z}/{x}/{y}.png",{maxZoom:14}).addTo(e),e.scrollWheelZoom.disable(),e}function n(e){var t='<div class="incident-popup"><ul>',n=[];return n.push(["ID",e.id]),n.push(["Date",e.date_occurred]),n.push(["Time",e.time_of_day]),n.push(["Incident Type",e.incident_type]),n.push(["Incident Action",e.incident_action]),n.push(["Longitude",e.longitude]),n.push(["Latitude",e.latitude]),n.push(["Closest Coastal State",e.closest_coastal_state]),n.push(["Territorial Water Status",e.territorial_water_status]),n.push(["Vessel Name",e.vessel_name]),n.push(["Vessel Country",e.vessel_country]),n.push(["Vessel Status",e.vessel_status]),n.forEach(function(e){t+="<li>"+e[0]+": "+e[1]+"</li>"}),t+="</ul></div>"}function a(e){var t,a;return t=e.map(function(e){return new L.marker([e.latitude,e.longitude]).on("click",function(t){this.bindPopup(n(e),{maxWidth:450}),this.openPopup()})}),a=L.layerGroup(t)}var i=t(),s=a(e.data);e.$watch(function(){return e.data},function(e){i.removeLayer(s),s=a(e),i.addLayer(s)})}return{restrict:"E",replace:!0,transclude:!0,templateUrl:"app/components/common/directives/incident-map/incident-map.template.html",scope:{data:"=data"},link:e}}mp.directive("incidentMap",[e])}(),function(){"use strict";function e(){return{restrict:"E",replace:!0,templateUrl:"app/components/common/directives/incidents-per-year/incidents-per-year.template.html",scope:{data:"=data",beginDate:"=beginDate",endDate:"=endDate",countries:"=countries"},link:function(e,t,n){function a(e){var t={},n=[],a=[];return e.forEach(function(e){t.hasOwnProperty(e.country)||(t[e.country]={key:e.country,values:[]}),t[e.country].values.push({year:e.year,count:Number(e.count)})}),Object.keys(t).forEach(function(e){n.push(t[e])}),a=n.sort(function(e,t){var n=0,a=0;return e.values.forEach(function(e){n+=e.count}),t.values.forEach(function(e){a+=e.count}),a>n?1:n>a?-1:0})}function i(t){for(var n,a=[],i=0,s=e.beginDate.getFullYear();s<=e.endDate.getFullYear();s++)a.push(s);t.forEach(function(e){e.values.forEach(function(e){(0===i||e.count>i)&&(i=e.count)})}),nv.addGraph(function(){return n=nv.models.lineChart().useInteractiveGuideline(!0),n.x(function(e){return e.year}),n.y(function(e){return e.count}),n.xAxis.axisLabel("Year"),n.forceX([a[0],a[a.length-1]]),n.xAxis.tickValues(a),n.yAxis.axisLabel("Incident Count"),n.forceY([0,i]),0===e.countries.length&&(t=t.splice(0,5)),d3.select(".incidents-per-year-graph > svg").datum(t).call(n),n})}e.$watch(function(){return e.data},function(e){var t=a(e);i(t)})}}}mp.directive("incidentsPerYear",e)}(),function(){"use strict";function e(){function e(e,t,n){angular.isDefined(n.minDate)&&(e.minDate=new Date(n.minDate)),angular.isDefined(n.maxDate)&&(e.maxDate=new Date(n.maxDate)),e.format="MM/dd/yyyy",e.status={opened:!1},e.open=function(t){e.status.opened=!0},e.dateOptions={formatYear:"yy",startingDay:1}}return{restrict:"E",replace:!0,transclude:!0,templateUrl:"app/components/common/directives/date-picker/date-picker.template.html",scope:{modelVal:"=ngModel"},link:e}}mp.directive("datePicker",e)}()(function(){"use strict";function e(){return{restrict:"E",replace:!0,templateUrl:"app/components/common/directives/typeahead-multiselect/typeahead-multiselect.template.html",scope:{enteredText:"=",allItems:"=",selectedItems:"="},link:function(e,t,n){e.selectItem=function(t){if(e.selectedItems.indexOf(t)<0){var n=e.allItems.indexOf(t);e.selectedItems.push(e.allItems[n])}e.enteredText=""},e.deselectItem=function(t){var n=e.selectedItems.indexOf(t);e.selectedItems.splice(n,1)}}}}mp.directive("typeaheadMultiselect",e)})();