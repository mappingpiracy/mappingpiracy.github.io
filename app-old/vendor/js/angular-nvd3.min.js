!function(){"use strict";angular.module("nvd3",[]).directive("nvd3",["utils",function(t){return{restrict:"AE",scope:{data:"=",options:"=",api:"=?",events:"=?",config:"=?"},link:function(e,n){function i(t,n){t&&n&&angular.forEach(t,function(i,r){"dispatch"===r?((void 0===n[r]||null===n[r])&&e._config.extended&&(n[r]={}),a(i,n[r])):["scatter","defined","options","axis","rangeBand","rangeBands","_options","_inherited","_d3options","_calls"].indexOf(r)<0&&(void 0===n[r]||null===n[r]?e._config.extended&&(n[r]=i()):t[r](n[r]))})}function a(t,n){t&&n&&angular.forEach(t,function(i,a){void 0===n[a]||null===n[a]?e._config.extended&&(n[a]=i.on):t.on(a+"._",n[a])})}function r(i){var a=t.deepExtend(o(i),e.options[i]||{});e._config.extended&&(e.options[i]=a);var r=angular.element("<div></div>").html(a.html||"").addClass(i).addClass(a["class"]).removeAttr("style").css(a.css);a.html||r.text(a.text),a.enable&&("title"===i?n.prepend(r):"subtitle"===i?n.find(".title").after(r):"caption"===i&&n.append(r))}function c(){var i=t.deepExtend(s(),e.options.styles||{});e._config.extended&&(e.options.styles=i),angular.forEach(i.classes,function(t,e){t?n.addClass(e):n.removeClass(e)}),n.removeAttr("style").css(i.css)}function o(t){switch(t){case"title":return{enable:!1,text:"Write Your Title","class":"h4",css:{width:e.options.chart.width+"px",textAlign:"center"}};case"subtitle":return{enable:!1,text:"Write Your Subtitle",css:{width:e.options.chart.width+"px",textAlign:"center"}};case"caption":return{enable:!1,text:"Figure 1. Write Your Caption text.",css:{width:e.options.chart.width+"px",textAlign:"center"}}}}function s(){return{classes:{"with-3d-shadow":!0,"with-transitions":!0,gallery:!1},css:{}}}var d={extended:!1,visible:!0,disabled:!1,autorefresh:!0,refreshDataOnly:!1,deepWatchData:!0,debounce:10};e._config=angular.extend(d,e.config),e.api={refresh:function(){e.api.updateWithOptions(e.options)},update:function(){e.chart.update()},updateWithOptions:function(t){e.api.clearElement(),angular.isDefined(t)!==!1&&e._config.visible&&(e.chart=nv.models[t.chart.type](),angular.forEach(e.chart,function(n,r){"options"===r||"_options"===r||"_inherited"===r||"_d3options"===r||"state"===r||("dispatch"===r?((void 0===t.chart[r]||null===t.chart[r])&&e._config.extended&&(t.chart[r]={}),a(e.chart[r],t.chart[r])):["lines","lines1","lines2","bars","bars1","bars2","stack1","stack2","multibar","discretebar","pie","scatter","bullet","sparkline","legend","distX","distY","xAxis","x2Axis","yAxis","yAxis1","yAxis2","y1Axis","y2Axis","y3Axis","y4Axis","interactiveLayer","controls"].indexOf(r)>=0?((void 0===t.chart[r]||null===t.chart[r])&&e._config.extended&&(t.chart[r]={}),i(e.chart[r],t.chart[r],t.chart.type)):("xTickFormat"!==r&&"yTickFormat"!==r||"lineWithFocusChart"!==t.chart.type)&&(void 0===t.chart[r]||null===t.chart[r]?e._config.extended&&(t.chart[r]=n()):e.chart[r](t.chart[r])))}),e.api.updateWithData(e.data),(t.title||e._config.extended)&&r("title"),(t.subtitle||e._config.extended)&&r("subtitle"),(t.caption||e._config.extended)&&r("caption"),(t.styles||e._config.extended)&&c(),nv.addGraph(function(){return e.chart.resizeHandler=nv.utils.windowResize(function(){e.chart.update()}),e.chart},t.chart.callback))},updateWithData:function(t){t&&(e.options.chart.transitionDuration=+e.options.chart.transitionDuration||250,d3.select(n[0]).select("svg").remove(),d3.select(n[0]).append("svg").attr("height",e.options.chart.height).attr("width",e.options.chart.width||"100%").datum(t).transition().duration(e.options.chart.transitionDuration).call(e.chart))},clearElement:function(){n.find(".title").remove(),n.find(".subtitle").remove(),n.find(".caption").remove(),n.empty(),e.chart&&e.chart.resizeHandler&&e.chart.resizeHandler.clear(),e.chart=null,nv.render.queue=[],nv.graphs=[],nv.tooltip.cleanup()},getScope:function(){return e}},e.$watch("options",t.debounce(function(){!e._config.disabled&&e._config.autorefresh&&e.api.refresh()},e._config.debounce,!0),!0),e.$watch("data",function(t,n){t!==n&&e.chart&&!e._config.disabled&&e._config.autorefresh&&(e._config.refreshDataOnly?e.chart.update():e.api.refresh())},e._config.deepWatchData),e.$watch("config",function(t,n){t!==n&&(e._config=angular.extend(d,t),e.api.refresh())},!0),angular.forEach(e.events,function(t,n){e.$on(n,function(n){return t(n,e)})}),n.on("$destroy",function(){e.api.clearElement()})}}}]).factory("utils",function(){return{debounce:function(t,e,n){var i;return function(){var a=this,r=arguments,c=function(){i=null,n||t.apply(a,r)},o=n&&!i;clearTimeout(i),i=setTimeout(c,e),o&&t.apply(a,r)}},deepExtend:function(t){var e=this;return angular.forEach(arguments,function(n){n!==t&&angular.forEach(n,function(n,i){t[i]&&t[i].constructor&&t[i].constructor===Object?e.deepExtend(t[i],n):t[i]=n})}),t}}})}();
